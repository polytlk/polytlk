apiVersion: tyk.tyk.io/v1alpha1
kind: ApiDefinition
metadata:
  name: eden-api
spec:
  name: eden-api
  enable_jwt: true
  jwt_signing_method: hmac
  jwt_skip_kid: true
  jwt_source: ZGphbmdvLWluc2VjdXJlLTM2MiZvNWd3d3UrOWQ4I29oczJyNTl5KWJoaGw5Z3BfYnVobnp5di1nKm0jbykmNWIt
  jwt_policy_field_name: pol
  jwt_default_policies:
  - default/jwt-policy
  protocol: http
  active: true
  proxy:
    target_url: http://eden-svc.default.svc:7079
    listen_path: '/api/chinese'
    strip_listen_path: true
  CORS:
    enable: true
    allowed_origins:
    - http://localhost:4200
    allowed_methods:
    - GET
    - POST
    - OPTIONS
    allowed_headers: []
    exposed_headers: []
    allow_credentials: false
    max_age: 24
    options_passthrough: true
  custom_middleware:
    driver: otto
    pre:
    - name: "exampleJavaScriptMiddlewarePreHook"
      path: "middleware/example-javascript-middleware.js"

