apiVersion: tyk.tyk.io/v1alpha1
kind: ApiDefinition
metadata:
  name: eden-api
spec:
  name: eden-api
  use_keyless: true
  protocol: http
  active: true
  proxy:
    target_url: http://eden-svc.default.svc:7079
    listen_path: '/api/chinese'
    strip_listen_path: true
  CORS:
    enable: true
    allowed_origins:
    - http://localhost:4200
    allowed_methods:
    - GET
    - POST
    - OPTIONS
    allowed_headers: []
    exposed_headers: []
    allow_credentials: false
    max_age: 24
    options_passthrough: false
    debug: true
  version_data:
    not_versioned: true
    default_version: ""
    versions:
      "0.1.0":
        name: "0.1.0"
        use_extended_paths: true
        extended_paths:
          whitelist:
          - path: "/task/{task_id}/stream"
            method_actions:
              GET:
                action: "no_action"
                code: 200
                headers: {}
          - path: "/chinese"
            method_actions:
              POST:
                action: "no_action"
                code: 200
                headers: {}
          track_endpoints:
          - path: "/task/{task_id}/stream"
            method: "GET"
          - path: "/interpretation"
            method: "POST"
